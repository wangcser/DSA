# 灯泡开关
> Author ID.9276 

**问题关键词：**

- 因子分解

## 01 题目

初始时有 *n* 个灯泡关闭。 第 1 轮，你打开所有的灯泡。 第 2 轮，每两个灯泡你关闭一次。 第 3 轮，每三个灯泡切换一次开关（如果关闭则开启，如果开启则关闭）。第 *i* 轮，每 *i* 个灯泡切换一次开关。 对于第 *n* 轮，你只切换最后一个灯泡的开关。 找出 *n* 轮后有多少个亮着的灯泡。

**示例:**

```
输入: 3
输出: 1 
解释: 
初始时, 灯泡状态 [关闭, 关闭, 关闭].
第一轮后, 灯泡状态 [开启, 开启, 开启].
第二轮后, 灯泡状态 [开启, 关闭, 开启].
第三轮后, 灯泡状态 [开启, 关闭, 关闭]. 

你应该返回 1，因为只有一个灯泡还亮着。
```

## 02 输入分析



## 03 解题思路

### 3.1 基础思路

- 对于 n 个灯泡中的 i 号灯泡，在 n 轮试验中其会被开闭的次数为 i 的因子的个数
  - i = 4，则该灯泡在 [1, 2, 4] 轮被开闭
- 对于偶数次开闭，影响，对于奇数次开闭，得到最终解
- 问题转化为求 1 到 n 中含有奇数个因子的数的个数
  - 对于一个非平方数，他的因子总是成对出现，因此必为偶数个
  - 只有平方数才有奇数个因子
- 问题转化为求 1 到 n 之间 平方数的个数
  - 对于平方的目标 n 来说，从 1 到 $\sqrt{n}$ 的平方都小于 n
  - 因此问题转化为求 n 的平方根

### 3.2 算法优化



## 04 核心代码

```c++
class Solution {
public:
    int bulbSwitch(int n) {
        return sqrt(n);
    }
};
```

## 05 算法效率分析



## 06 问题总结

