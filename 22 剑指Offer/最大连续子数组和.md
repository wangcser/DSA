# 最大连续子数组和
> Author ID.9276 

**问题关键词：**

- DP
- 子集和问题

## 01 题目

输入一个整形数组，数组里有正数也有负数。数组中连续的一个或多个整数组成一个子数组，每个子数组都有一个和。 求所有子数组的和的最大值，要求时间复杂度为O(n)。

例如输入的数组为`1, -2, 3, 10, -4, 7, 2, -5`，和最大的子数组为`3, 10, -4, 7, 2`， 因此输出为该子数组的和18。

## 02 输入分析



## 03 解题思路

### 3.1 基础解法

#### 遍历所有子数组

- 分析
  - 求一个数组的最大子数组和，我想最直观最野蛮的办法便是，三个for循环三层遍历，求出数组中每一个子数组的和，最终求出这些子数组的最大的一个值。
- 算法
  - 使用两层循环遍历所有的子数组
  - 再用一层循环求子数组和
  - 使用两个变量，一个记录当前子数组和，一个记录历史最大子数组和
- 复杂度
  - 时间： O(n^3)
  - 空间：O(1)

### 3.2 优化 - 一维 DP

- 分析

  - 子数组之间存在很多重叠

  - 设 currSum 为前 j 个元素的最大和

  - **当我们往后扫描时，对第j+1个元素有两种选择：要么放入前面找到的子数组，要么做为新子数组的第一个元素**；

    - 如果currSum加上当前元素a[j]后不小于a[j]，则令currSum加上a[j]，否则currSum重新赋值，置为下一个元素，即currSum = a[j]。

    > 应该说加上 aj 后还比 aj 小，则应该从 aj 开始，否则拓展到 aj

    - 同时，当currSum > maxSum，则更新maxSum = currSum，否则保持原值，不更新。

  ```c++
  currSum = max(a[j], currSum + a[j])
  maxSum = max(maxSum, currSum)
  ```

- 算法

- 复杂度：扫描一次即可

  - 空间

```c++
int MaxSubArray(int* a, int n)
{
    int currSum = 0;
    int maxSum = a[0];       //全负情况，返回最大数

    for (int j = 0; j < n; j++)
    {
        currSum = (a[j] > currSum + a[j]) ? a[j] : currSum + a[j];
        maxSum = (maxSum > currSum) ? maxSum : currSum;

    }
    return maxSum;
}
```

​	

```c++
class Solution {
public:
    int FindGreatestSumOfSubArray(vector<int> array) {
        int curSum = 0;
        int maxSum = array[0];

        for(int j = 0; j < array.size(); ++j) {
            curSum = max(array[j], curSum + array[j]);
            maxSum = max(curSum, maxSum);
        }

        return maxSum;

    }
};
```



## 04 问题总结

**上面的这类问题都属于子集和问题，使用 DP 思维求解**

1. 如果数组是二维数组，同样要你求最大子数组的和列?
2. 如果是要你求子数组的最大乘积列?
3. 如果同时要求输出子段的开始和结束列?
   1. 需要进行标记

#### 问题拓展

#### 拼木板

给定整型数组，其中每个元素表示木板的高度，木板的宽度都相同，求这些木板拼出的最大矩形的面积。并分析时间复杂度。

- 分析：
  - 此题类似leetcode里面关于连通器的题，需要明确的是**高度可能为0**，长度最长的矩形并不一定是最大矩形，还需要考虑高度很高，但长度较短的矩形。如[5,4,3,2,4,5,0,7,8,4,6]中最大矩形的高度是[7,8,4,6]组成的矩形，面积为16。
  - 题意指选择连续的木板，将其最短的木板和木板数量的积表示面积，求该面积的最大值

#### 环面上的最大子矩形

#### 最大子矩阵和

一个M*N的矩阵，找到此矩阵的一个子矩阵，并且这个子矩阵的元素的和是最大的，输出这个最大的值。如果所有数都是负数，就输出0。 例如：3*5的矩阵：

1 2 0 3 4

2 3 4 5 1

1 1 5 3 0

和最大的子矩阵是：

4 5

5 3

最后输出和的最大值17。

#### 允许交换两个数的位置：求最大子数组和