# 判断直线相交
> Author ID.9276 

**问题关键词：**

- 浮点数比较大小

## 01 题目

给定直角坐标系上的两条直线，确定这两条直线会不会相交。

线段以斜率和截距的形式给出，即double **s1**，double **s2**，double **y1**，double **y2**，分别代表直线1和2的斜率(即s1,s2)和截距(即y1,y2)，请返回一个bool，代表给定的两条直线是否相交。这里两直线重合也认为相交。

测试样例：

```
3.14,3.14,1,2
返回：false
```

## 02 分析

- 浮点数比较大小的问题
  - float 类型具有 7 位有效数字，单精度浮点数的实际有效精度为24位二进制
    - 使用 23 位 bit 存储尾数
    - 加上默认的小数点前的1位1，2^(23+1) = 16777216。因为 10^7 < 16777216 < 10^8
  - double 类型具有 16 位有效数字，同理，双精度为 54 位
    - 使用 52 位 bit 存储尾数
    - 2^(52+1) = 9007199254740992，10^16 < 9007199254740992 < 10^17
- 在比较的时候需要用一个很小的数值来进行比较。（二分法的思想）当二者之差小于这个很小的数时，就认为二者是相等的了。这个很小的数，称为精度， esp
  - 精度由计算过程中需求而定。比如一个常用的精度为1e-6.也就是0.000001.
  - 所以对于两个浮点数a,b，如果要比较大小，那么常常会设置一个精度
    如果fabs(a-b)<=1e-6，那么就是相等了。 fabs是求浮点数绝对值的函数。
  - 类似的 判断大于的时候，就是if(a>b && fabs(a-b)>1e-6)。
  - 判断小于的时候，就是if(a<b&&fabs(a-b)>1e-6)

## 03 题解

### 基础：

```c++
class CrossLine {
public:
    bool checkCrossLine(double s1, double s2, double y1, double y2) {

        double esp = 1e-6;

        double diff_s = s1 - s2;
        double diff_y = y1 - y2;

        if (-esp < diff_s && diff_s < esp) {
            if (-esp < diff_y && diff_y < esp)
                return true;
            else return false;
        }

        return true;
    }
};
```



### 优化：



## 04 总结

